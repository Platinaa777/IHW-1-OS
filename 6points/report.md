## Мирошниченко Денис Александрович БПИ 225

# Вариант 3 (6 баллов, см. дальше для других баллов)

## *Cхема подробная для всех процессов и каналов:*

## Общая схема решаемой задачи:

Для решения задачи взаимодействия между двумя родственными процессами с использованием неименованных каналов, программа создает два процесса: родительский процесс (процесс 1) и дочерний процесс (процесс 2). 

Процесс 1 читает данные из входного файла и передает их в процесс 2 через неименованный канал. 

Процесс 2 обрабатывает полученные данные в соответствии с заданием и отправляет результат обратно процессу 1 через другой неименованный канал. 

Процесс 1 записывает полученные результаты в выходной файл.

---

### Логика работы программы:

- Создание каналов: В начале программы создаются два неименованных канала с помощью функции pipe. 

- Первый канал (pipe1) будет использоваться для передачи данных от процесса 1 к процессу 2, а второй канал (pipe2) - для передачи данных от процесса 2 к процессу 1.

- Создание процессов: После создания каналов процесс 1 порождает дочерний процесс (процесс 2) с помощью системного вызова fork. Таким образом, создается два процесса - процесс 1 и процесс 2.

#### Обмен данными между процессами:

- Процесс 1: Закрывает читающий конец первого канала (pipe1[0]) и записывает данные из входного файла в письменный конец канала (pipe1[1]).
- Процесс 2: Закрывает письменный конец первого канала (pipe1[1]), считывает данные из читающего конца (pipe1[0]), обрабатывает их в соответствии с заданием и отправляет результаты обратно в процесс 1 через второй канал (pipe2).

##### Запись данных в выходной файл: 

- Процесс 1 закрывает читающий конец второго канала (pipe2[0]), открывает выходной файл для записи и записывает данные, полученные от процесса 2, в выходной файл.

#### Ожидание завершения процессов: 

После записи данных в выходной файл процесс 1 ожидает завершения работы процесса 2 с помощью вызова waitpid.

### Имена каналов:

- Первый канал для передачи данных от процесса 1 к процессу 2: pipe1.

- Второй канал для передачи данных от процесса 2 к процессу 1: pipe2.

### Способ создания каналов:

- Для создания каналов используется системный вызов pipe, который создает пару файловых дескрипторов для взаимодействия через каналы.

## Формат вводна данных в cmd:

[ *input-file output-file n* ]

---

Ввод и вывод данных при работе с файлами осуществлять через системные вызовы операционной системы read и write.

---

Размеры буферов для хранения вводимых данных и результатов обработки должны быть равны 5000 байт.

```
#define BUFFER_SIZE 5000
```

## Отчет по тестам:

**Справка:**

- Первое название файл, с которого берется информация

- Второй файл, куда записывается результат


---

- **1 command:** ./a.out ./tests/test1.txt ./out/out1.txt 4
    
    *src = test1.txt*

    *out = out1.txt*

    *res=5432*

---

- **2 command:** ./a.out ./tests/test2.txt ./out/out2.txt 3
    
    *src = test2.txt*

    *out = out2.txt*

    *res=fdc*

---

- **3 command:** ./a.out ./tests/test3.txt ./out/out3.txt 2
    
    *src = test3.txt*

    *out = out3.txt*

    *res=he* 

---

- **4 command:** ./a.out ./tests/test4.txt ./out/out4.txt 3
    
    *src = test4.txt*

    *out = out4.txt*

    *res=''*

---

- **5 command:** ./a.out ./tests/test5.txt ./out/out5.txt 2
    
    *src = test5.txt*

    *out = out5.txt*

    *res=''*
