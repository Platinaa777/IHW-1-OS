## Мирошниченко Денис Александрович БПИ 225

# Вариант 3 (8 баллов, см. дальше для других баллов)

## *Cхема подробная для всех процессов и каналов:*

**Этапы:**

### **Общая схема решаемой задачи:**

Программа состоит из двух независимых процессов, каждый из которых выполняет свою часть работы. Первый процесс (программа 1process.cpp) отвечает за чтение текстовых данных из указанного файла и передачу их через именованный канал второму процессу. Второй процесс (программа 2process.cpp) выполняет обработку данных в соответствии с заданием и передает результат обратно первому процессу через другой именованный канал. Процессы используют именованные каналы для обмена данными.

**Для корректной работы нужно выполнить поэтапно!!!:**

- Запустить 1 процесс (считает информацию и передает на обработку через канал 2 процессу, далее он ждет ответа)
- Запустить 2 процесс (считывает информацию и обрабатывает ее, передает ответ 1 процессу, завершается сам и 1 процесс после записи в файл тоже завершается)
---

### **Имена именованных каналов:**

- Канал для передачи данных от процесса 1 к процессу 2: pipe1.
- Канал для передачи данных от процесса 2 к процессу 1: pipe2.

---

### **Способ создания именованных каналов:**

Именованные каналы создаются с помощью системного вызова mknod, который создает специальные файлы в файловой системе, представляющие собой именованные каналы.

---

### Логика работы программы:

- Создание именованных каналов: Программы создает два именованных канала pipe1 и pipe2.

- Создание процессов: Все процессы являются независимыми друг от друга

### Обмен данными между процессами:

- Процесс 1: Читает данные из входного файла и передает их через pipe1 процессу 2.
- Процесс 2: Принимает данные от процесса 1 через pipe1, обрабатывает их в соответствии с заданием и отправляет результат через pipe2 процессу 1.
- Запись данных в выходной файл: Процесс 1 читает данные от процесса 2 через pipe2 и записывает их в выходной файл.


## Формат вводна данных в cmd:

[ *input-file output-file n* ]

---

Ввод и вывод данных при работе с файлами осуществлять через системные вызовы операционной системы read и write.

---

Размеры буферов для хранения вводимых данных и результатов обработки должны быть равны 5000 байт.

```
#define BUFFER_SIZE 5000
```

## Отчет по тестам:

**Справка:**

- Первое название файл, с которого берется информация

- Второй файл, куда записывается результат


---

- **1 command:** ./a.out ./tests/test1.txt ./out/out1.txt 4
    
    *src = test1.txt*

    *out = out1.txt*

    *res=5432*

---

- **2 command:** ./a.out ./tests/test2.txt ./out/out2.txt 3
    
    *src = test2.txt*

    *out = out2.txt*

    *res=fdc*

---

- **3 command:** ./a.out ./tests/test3.txt ./out/out3.txt 2
    
    *src = test3.txt*

    *out = out3.txt*

    *res=he* 

---

- **4 command:** ./a.out ./tests/test4.txt ./out/out4.txt 3
    
    *src = test4.txt*

    *out = out4.txt*

    *res=''*

---

- **5 command:** ./a.out ./tests/test5.txt ./out/out5.txt 2
    
    *src = test5.txt*

    *out = out5.txt*

    *res=''*